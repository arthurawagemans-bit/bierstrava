{% macro render_group(group, current_user) %}
{% set unseen = group.unseen_post_count(current_user) %}
{% set pending = group.pending_request_count() if group.is_admin(current_user) else 0 %}
{% set badge_count = unseen + pending %}
<a href="{{ url_for('groups.detail', id=group.id) }}"
   class="block bg-white rounded-xl p-4 mb-3 border border-gray-100 hover:border-maroon-200 transition-colors">
    <div class="flex items-center gap-3">
        <div class="relative flex-shrink-0">
            {% if group.avatar_filename %}
            <img src="{{ url_for('static', filename='uploads/' + group.avatar_filename) }}"
                 class="w-12 h-12 rounded-xl object-cover" alt="{{ group.name }}">
            {% else %}
            <div class="w-12 h-12 rounded-xl bg-maroon-100 flex items-center justify-center">
                <span class="text-maroon font-bold text-lg">{{ group.name[0]|upper }}</span>
            </div>
            {% endif %}
            {% if badge_count %}
            <span class="absolute -top-1.5 -right-1.5 bg-red-500 text-white text-[10px] font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1">{{ badge_count }}</span>
            {% endif %}
        </div>
        <div class="flex-1 min-w-0">
            <p class="font-semibold text-sm text-gray-900 truncate">{{ group.name }}</p>
            <p class="text-xs text-gray-400">{{ group.member_count() }} member{{ 's' if group.member_count() != 1 }}</p>
        </div>
        <svg class="w-5 h-5 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
        </svg>
    </div>
    {% if group.description %}
    <p class="text-xs text-gray-500 mt-2 line-clamp-2">{{ group.description }}</p>
    {% endif %}
</a>
{% endmacro %}
